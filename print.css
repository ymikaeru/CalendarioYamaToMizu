/* --- IMPRESSÃO RIGOROSA (V3 SAFE ZONE) --- */

/* RESET TOTAL (Apenas para impressora real) */
@media print {
    @page {
        size: A4 portrait;
        margin: 0;
    }

    html,
    body {
        width: 210mm !important;
        height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: visible !important;
        background: white !important;
    }
}

/* --- LÓGICA DE VISIBILIDADE --- */

/* Padrão (Mês Atual): Esconde tudo menos #calendario e .container (para o site normal funcionar) */
body:not(.printing-year)>*:not(#calendario):not(#grid-view):not(.container) {
    display: none !important;
}

/* Modo Ano Completo (Print Real): Esconde tudo menos #print-container */
body.printing-year>*:not(#print-container) {
    display: none !important;
}

body.printing-year #print-container {
    display: block !important;
}

body.printing-year #calendario {
    display: none !important;
}

/* --- LAYOUT DE IMPRESSÃO (Disponível para Print e Grid View via classe .print-mode) --- */

.print-mode {
    position: relative;
    width: 210mm;
    height: 297mm;
    background: white;
    overflow: hidden;
}

/* Estilos Base do Container de Impressão (Mês Atual) quando em modo print */
#calendario.print-mode {
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
}

/* PÁGINA PARA O ANO COMPLETO */
#print-container {
    margin: 0;
    padding: 0;
    width: 210mm;
}

#print-container .pagina {
    position: relative !important;
    width: 210mm !important;
    height: 297mm !important;
    page-break-after: always !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* --- LAYOUT ABSOLUTO RÍGIDO V3 (SAFE ZONE) --- */
/* Aplicado apenas dentro de elementos com classe .print-mode */

/* 1. SEÇÃO CALENDÁRIO (Esquerda) */
.print-mode .calendar-section {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 45% !important;
    height: 230mm !important;
    /* Segurança máxima */
    padding: 15mm 10mm 0 15mm !important;
    /* Top padding levemente menor */
    margin: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    background: transparent !important;
    /* Remove fundo branco do style.css */
}

/* 2. HEADER DA LISTA */
.print-mode .calendar-header {
    flex: 0 0 auto !important;
    margin-bottom: 1mm !important;
}

.print-mode .list-header {
    flex: 0 0 auto !important;
    display: flex !important;
    justify-content: space-between !important;
    /* border-bottom removido pelo usuário */
    margin-bottom: 1mm !important;
    padding-bottom: 1mm !important;
}

/* 3. LISTA DE DIAS (Flex-Fit) */
.print-mode .calendar-list {
    flex: 1 1 auto !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    height: 100% !important;
    overflow: hidden !important;
}

/* Dias auto-ajustáveis */
.print-mode .day-row {
    flex: 1 1 auto !important;
    display: grid !important;
    grid-template-columns: 35px 50px 1fr !important;
    align-items: center !important;
    padding: 0 !important;
    border-bottom: 0.5px dotted #ccc !important;
    min-height: 0 !important;
}

.print-mode .day-num {
    font-size: 10px !important;
    margin: 0 !important;
}

.print-mode .day-weekday-jp {
    font-size: 9px !important;
}

.print-mode .day-feriado {
    font-size: 8px !important;
    line-height: 1 !important;
    transform: scale(0.9);
    transform-origin: right center;
}


/* 4. SEÇÃO POESIA (Direita) */
.print-mode .hero-section {
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    width: 55% !important;
    height: 230mm !important;
    padding: 20mm 15mm 0 10mm !important;
    background: transparent !important;
    border: none !important;
}

.print-mode .poem-line {
    font-size: 30px !important;
    position: absolute !important;
}


.print-mode .poem-line:nth-child(1) {
    top: 10%;
    right: -10%;
    !important;
    /* Ajuste fino para centralizar se necessário, ou remova */
}


/* Linha 2 (Meio) */
.print-mode .poem-line:nth-child(2) {
    top: 17%;
    right: 62% !important;
    /* Ajuste fino para centralizar se necessário, ou remova */
}


/* Linha 3 (Esquerda / Baixo) */
.print-mode .poem-line:nth-child(3) {
    top: 41%;
    right: 100%;
}


/* 5. RODAPÉ (Baixo) */
.print-mode .calendar-footer {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 53mm !important;
    padding: 0 15mm 10mm 15mm !important;
    background: transparent !important;
    display: flex !important;
    align-items: flex-end !important;
    justify-content: space-between !important;
}

.print-mode .month-title {
    font-size: 22px !important;
    margin: 0 !important;
}

/* Centraliza a coluna do meio e faz ocupar toda a altura */
.print-mode .footer-traducao {
    position: relative !important;
    bottom: 0 !important;
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    padding-top: 5px !important;
    /* Ajuste para alinhar com o topo dos calendários */
}

.print-mode .footer-obra-titulo {
    margin-bottom: 5px !important;
    position: static !important;
    /* Remove posicionamento relativo anterior */
    transform: none !important;
    width: auto !important;
    left: auto !important;
    top: auto !important;
    text-align: center !important;
    font-size: 14px !important;
    /* Ajuste se necessário */
    font-weight: bold !important;
    margin-top: 12px !important;
}

.print-mode .romaji-texto {
    font-size: 10px !important;
    margin-bottom: auto !important;
    /* EMPURRA A TRADUÇÃO PARA BAIXO */
    text-align: center !important;
}

.print-mode .traducao-texto {
    font-size: 1.1rem !important;
    line-height: 1.3 !important;
    text-align: center !important;
}

/* Alinhamento superior dos mini calendarios */
.print-mode .footer-mini-cal {
    align-self: flex-start !important;
    margin-top: 10px !important;
    /* Pequeno ajuste para não colar no topo absoluto */
}